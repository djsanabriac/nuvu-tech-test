<div class="container fadeIn fast">
  <h1 class="mt-5">{{ client.name }} {{ client.last_name }}</h1>
  <p class="lead">{{ client.id_type.abbreviation + ' ' + client.id_number }}</p>
  <p class="lead">{{ client.email }} | {{ client.phone_number }}</p>

  <h2>Tarjetas ( {{ (cards ? cards.length : 0) }} ) </h2>
  <button class="btn btn-success" type="submit" data-bs-toggle="modal" data-bs-target="#exampleModal">Crear</button>
  <div style="height: 25px"></div>

    <a *ngFor="let c of cards " class="list-group-item list-group-item-action" aria-current="true">
      <div class="d-flex w-100 justify-content-between">
        <h5 class="mb-1">{{ c.card_number }} {{ c.payment_network.name }}</h5>
      </div>
      <p class="mb-1">{{c.card_holder_name }}  | Expira:  {{ c.expiration_date | date: 'MM/yy' }}</p>
      <p class="mb-1">{{ c.state == 'A' ? 'Activa' : 'Inactiva' }} | CVV: {{ c.cvv }}</p>
    </a>

  <div class="list-group"></div>
</div>

<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Crear tarjeta</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" (click)="showSuccess=false; showModalError= false"></button>
      </div>
      <div class="alert alert-danger" role="alert" *ngIf="showModalError">
        {{errorModalMessage}}
      </div>
      <div class="alert alert-success" role="alert" *ngIf="showSuccess">
        {{sucessModalMessage}}
      </div>
      <div class="modal-body">
        <form [formGroup]="cardForm" ngNativeValidate>


          <div class="form-group">
            <label for="card_holder_name" class="visually-hidden">Nombre</label>
            <input id="card_holder_name" formControlName="card_holder_name" class="form-control" placeholder="Nombre" required >
          </div>
          <div style="height: 25px" ></div>

          <div class="form-group">
            <label for="card_number" class="visually-hidden">Número tarjeta</label>
            <input id="card_number" appNumbersOnly formControlName="card_number" class="form-control" placeholder="Número tarjeta" required maxlength="16" minlength="16">
          </div>
          <div style="height: 5px" ></div>

          <div class="row" >
            <div class="form-group col">
              <div style="height: 24px" ></div>
              <label for="cvv" class="visually-hidden">Número de documento</label>
              <input id="cvv" formControlName="cvv" appNumbersOnly class="form-control " placeholder="CVV" required maxlength="3" minlength="3">
            </div>
            <div class="form-group col">
              <label for="exp_month" class="">Expira:</label>
              <select id="exp_month" class="form-select" formControlName="exp_month" aria-label="Mes" required>
                <option value="01" selected="selected">01</option>
                <option value="02">02</option>
                <option value="03">03</option>
                <option value="04">04</option>
                <option value="05">05</option>
                <option value="06">06</option>
                <option value="07">07</option>
                <option value="08">08</option>
                <option value="09">09</option>
                <option value="10">10</option>
                <option value="11">11</option>
                <option value="12">12</option>
              </select>
            </div>
            <div class="form-group col">
              <div style="height: 24px"></div>
              <label for="exp_year" class="visually-hidden">Año</label>
              <select id="exp_year" formControlName="exp_year" class="form-control " aria-label="Año" required >
                <option value="2021" selected="selected">2021</option>
                <option value="2022" >2022</option>
                <option value="2023" >2023</option>
                <option value="2024" >2024</option>
                <option value="2025" >2025</option>
                <option value="2026" >2026</option>
                <option value="2027" >2027</option>
                <option value="2028" >2028</option>
                <option value="2029" >2029</option>
                <option value="2030" >2030</option>
              </select>
            </div>
          </div>

          <div style="height: 25px" ></div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
            <button type="button" class="btn btn-secondary" >Limpiar</button>
            <button type="submit" class="btn btn-success"  [disabled]="!cardForm.valid" (click)="createCard()">Crear</button>
          </div>
        </form>

      </div>
    </div>
  </div>
</div>
